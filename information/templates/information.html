{% load staticfiles %}
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<link href="https://fonts.googleapis.com/css?family=Noto+Sans+KR|Roboto&display=swap" rel="stylesheet">

<!DOCTYPE html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
<script>
    function wrapWindowByMask() {
    //화면의 높이와 너비를 구한다.
    var maskHeight = $(document).height();
    var maskWidth = $(window).width();

    //문서영역의 크기
    console.log( "document 사이즈:"+ $(document).width() + "*" + $(document).height());
    //브라우저에서 문서가 보여지는 영역의 크기
    console.log( "window 사이즈:"+ $(window).width() + "*" + $(window).height());

    //마스크의 높이와 너비를 화면 것으로 만들어 전체 화면을 채운다.
    $('#mask').css({
        'width' : maskWidth,
        'height' : maskHeight
    });

    //애니메이션 효과
    //$('#mask').fadeIn(1000);
    $('#mask').fadeTo("slow", 0.5);
}

function popupOpen(name) {
    $('.layerpop').css("position", "absolute");
    //영역 가운에데 레이어를 뛰우기 위해 위치 계산
    $('.layerpop').css("top",(($(window).height() - $('.layerpop').outerHeight()) / 2) + $(window).scrollTop());
    $('.layerpop').css("left",(($(window).width() - $('.layerpop').outerWidth()) / 2) + $(window).scrollLeft());
    $('.layerpop').draggable();
    $(name).show();
}

function popupClose(name) {
    $(name).hide();
    $('#mask').hide();
}

function goDetail(name) {

    /*팝업 오픈전 별도의 작업이 있을경우 구현*/

    popupOpen(name); //레이어 팝업창 오픈
    wrapWindowByMask(); //화면 마스크 효과
}

  </script>    
    <style>
    .headlist{
    float:right;
    list-style-type: none;
    margin-top: 30px;
    }
    .headlist li{
    display : inline-block;
    }
    .headlist li a{
    text-decoration: none;
    font-family: 'Noto Sans KR', sans-serif;
    font-size: 15px;
    font-weight: bold;
    color:black;
    padding : 5px 20px;
    border : 1px solid transparent;
    transition: 0.6s ease;
    }
    .headlist li a:hover{
    background-color: black;
    color : white;
    text-decoration: none;
    }
 
    .logo img{
    position: absolute;
    margin-top: 30px;
    margin-left: 25px;
    float:left;
    width:25px;
    height: auto;
    left:30px;
    }
    .logo a{
    position: absolute;
    margin-top: 28px;
    margin-left: 60px;
    left:30px;
    text-decoration: none;
    font-family: Roboto;
    font-size: 20px;
    font-weight: bold;
    color:black;
    }
    .main{
    max-width: 1200px;
    margin: auto;
    }
   
    .review{
      margin : 0 30 0 30;
      padding : 30px;
      font-size:12px; 
      line-height: 20px;
    }
    h3{
      font-size : 15px;
      font-weight: bold;
    }
    .t{
      width : 1300px;
      position: relative;
      top : 15%;
      left : 10%;
    }
    td{
      height: 300;
      text-align: center;
    }
    .t1{
      float: left;
    }
    .t2{
      float: right;
    }
    .tdreview{
      margin : 0 30 0 30;
      height: 100;
      text-align:unset;
    }
    h2{
      font-size: 20px;
      font-weight: bold;
    }
    #titletd{
      height: 50;
    }
    .review td{
      height: 70;
    }
    #recommendtable td{
      height: 100;
      width : 400;
    }
    </style>  
  
  
  <header>
      <div class = "main">
    <div class="logo">
      <img src = "{%static 'TSicon.png'%}"><a href={%url 'home'%}>TroubleSearch</a>
    </div>
    <ul class = "headlist">
      <li><a href={%url 'search'%}>자가진단</a></li>
      <li><a href={%url 'skin'%}>제품정보</a></li>
      <li><a href={%url 'symp'%}>증상정보</a></li>
      </ul>
    </div>
    </header>
  
  <body>
    <div class = "t">
      <table class = "t1" style="margin-bottom: 20px;">
          <tr><td id = "titletd" colspan = "2"><h2>원인분석</h2></td></tr>
        {%for item in item%}
          <tr>
            <td width = "200"><h2>{{forloop.counter}}순위</h2></td>
            <td>
              <img src="/static/{{item.brand}}_{{item.name}}.png" style="place-self: center; margin : 30px;" width = 200 height = 200 alt="제품사진">
            </td>
            <td width = "200">
              <h3>{{item.brand}}</h3>
              <h3>{{item.categories}}</h3>
              <h3>{{item.name}}</h3>
            </td>
            <td width = "100"></td>
          </tr>
          {%endfor%}
        </table>
        <table class = "t2">
          <tr><td id = "titletd" colspan = "2"><h2>원인성분</h2></td></tr>
          <tr><td>
              {%for compo in components1%}
              <h3>{{compo.component_name}} {{compo.component_sim}}</h3>
              {%endfor%}
          </td></tr>
          <tr><td>
              {%for compo in components2%}
              <h3>{{compo.component_name}} {{compo.component_sim}}</h3>
              {%endfor%}
          </td></tr>
        </table>
      
    
   <div class = "review" style="clear:both;">
        <table width = "1100">
            <tr><td colspan = "2" height = "100"><h2>관련 리뷰</h2></td></tr>
    {%for productReview in productReviews%}
      {%for productR in productReview%}
          <tr style="margin-bottom: 10px;"><td class = "tdreview">
          <p id = "reviewtext">{{productR}}</p>
        </td></tr>
      {%endfor%}
    {%endfor%}
      </table>
      </div>
    
    <table id = "recommendtable">
      <tr><td id = "titletd" colspan = "3"><h2>대체제품</h2></td></tr>
      <tr>
        {%for recommend in recommend1 %}
        <td>
            <img src= "/static/{{recommend.brand}}_{{recommend.name}}.png" style="place-self: center;" width = 200 height = 200 alt="제품사진">
        </td>
        {%endfor%}

        {%for recommend in recommend2 %}
        <td>
          <img src= "/static/{{recommend.brand}}_{{recommend.name}}.png" style="place-self: center;" width = 200 height = 200 alt="제품사진">
        </td>
        {%endfor%}

      {%for recommend in recommend3 %}
      <td>
        <img src= "/static/{{recommend.brand}}_{{recommend.name}}.png" style="place-self: center;" width = 200 height = 200 alt="제품사진">
      </td>    
      {%endfor%}
      </tr>

      <tr>
          {%for recommend in recommend1 %}
          <td>
              <a> {{recommend.name}} </a><br>
              <a> {{recommend.categories}} </a><br>
              <a> {{recommend.brand}} </a><br>
          </td>
          {%endfor%}

          {%for recommend in recommend2 %}
          <td>
              <a> {{recommend.name}} </a><br>
              <a> {{recommend.categories}} </a><br>
              <a> {{recommend.brand}} </a><br>
          </td>
          {%endfor%}

          {%for recommend in recommend3 %}
          <td>
              <a> {{recommend.name}} </a><br>
              <a> {{recommend.categories}} </a><br>
              <a> {{recommend.brand}} </a><br>
          </td>
          {%endfor%}
      </tr>
      <tr><td height = "50"></td></tr>
    </table>

  </div>
  </body>
    