{%load staticfiles%}
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<link href="https://fonts.googleapis.com/css?family=Noto+Sans+KR|Roboto&display=swap" rel="stylesheet">
  <style>
    .wrapper{
      position : absolute;
      width : 100%;
      height: 100%;
      display: grid;
      padding : 5%;
      margin-bottom: 10%;
    }
    .searchform{
      position: relative;
      top:0;
      left : 20%;
      padding-bottom: 5%;
    }
    .row{
      position : relative;
      width : 85%;
      margin : 5%;
      left : 3%;
    }
    .categories{
      display: grid;
      position: absolute;
      width: 12%;
      padding-top: 200px;
      left : 2%;
      font-family: Noto Sans KR;
      font-weight: bold;
    }
    div{
      text-align : center;
      float: center;
    }
    .page{
      place-self: center;
      margin-bottom: 5%;
    }
    .headlist{
      float:right;
      list-style-type: none;
      margin-top: 30px;
    }
    .headlist li{
      display : inline-block;
    }
    .headlist li a{
      text-decoration: none;
      font-family: 'Noto Sans KR', sans-serif;
      font-size: 15px;
      font-weight: bold;
      color:black;
      padding : 5px 20px;
      border : 1px solid transparent;
      transition: 0.6s ease;
    }
    .headlist li a:hover{
      background-color: black;
      color : white;
      text-decoration: none;
    }
   
    .logo img{
      position: absolute;
      margin-top: 30px;
      margin-left: 25px;
      float:left;
      width:25px;
      height: auto;
      left:30px;
    }
    .logo a{
      position: absolute;
      margin-top: 28px;
      margin-left: 60px;
      left:30px;
      text-decoration: none;
      font-family: Roboto;
      font-size: 20px;
      font-weight: bold;
      color:black;
    }
    .main{
      max-width: 1200px;
      margin: auto;
    }
    #container{
      position: relative;
      margin-top : 10%;
      width : 100%;
      height: 70%;
      background-image:url("{%static 'skincareimg.jpg'%}");
    }
    .custom-select{
      margin:10px;
    }
    .searchbox{
      position : relative;
      left : 15%;
    }
    #search1, #search2{
      margin:10px;
    }
    #selection1{
      margin-right: 5%;
    }
    #selection2{
      margin-right: 7%;
    }
    .custom{
      width : 100px;
    }
  </style>  
  
  <header>
    <div class = "main">
  <div class="logo">
    <img src = "{%static 'TSicon.png'%}"><a href={%url 'home'%}>TroubleSearch</a>
  </div>
  <ul class = "headlist">
    <li><a href={%url 'search'%}>자가진단</a></li>
    <li><a href={%url 'skin'%}>제품정보</a></li>
    <li><a href={%url 'symp'%}>증상정보</a></li>
    </ul>
  </div>
  </header>
 
<img src = "{%static 'skincareimg.png'%}" width = "100%" height=500px style = "margin-top : 3%;">
  
  <div class = "wrapper"> 
    <div class = "searchbox">
    <form class="skincare_search form-inline" action="{% url 'productSearch' %}" method="POST" accept-charset="utf-8">
        {% csrf_token %}
        <p id = "search1">브랜드 </p>
      <select class = "custom-select" id = "selection1" name = "brand" type="text">
        <option value=10>전체</option>
        {%for brand in brand_list %}
        <option value={{brand.brand_id}}>{{brand.brand_name}}</option>
        {% endfor %}
    </select>

    <p id = "search2">카테고리 </p>
    <select class="custom-select" id = "selection2" name = "categories" type="text">
        <option value=10>전체</option>
        <option value=2>토너</option>
        <option value=3>로션</option>
        <option value=4>에센스</option>
        <option value=1>미스트</option>
        <option value=0>크림</option>
    </select>
<!--
      <button type="button" class="btn btn-primary" onclick="myFunction()">Search</button>-->
      <button class="btn btn-primary custom" type="submit">Search</button>
    </form>
  </div>

    <div class="row">
    {%for item in posts %}
      <div class="col-md-4">
        <div class="card mb-4 shadow-sm">
          <img src= "/static/{{item.brand_name}}_{{item.item_name}}.png" style="place-self: center;" width = 200 height = 200 alt="제품사진">
          <div class="card-body">
              <a style="font-size: small;"> {{item.brand_name}} </a><br>
              <a style="font-size: small;"> {{item.category_name}} </a><br>
              <a style="font-size: small;"> {{item.item_name}} </a><br>

              <div style="text-align: right;">
                <form id="{{item.item_id}}" action="{% url 'detail' %}" method="post" accept-charset="utf-8">
                  {% csrf_token %}             
                  <input type="hidden" name="id" value="{{item.item_id}}">
                  <a href="javascript:;" onclick="document.getElementById('{{item.item_id}}').submit();"><br>자세히보기</a>
                </form>
              </div>

              <div class="d-flex justify-content-between align-items-center"></div>
          </div>
        </div>
      </div>
    {%endfor%}
    </div>

    <div class = "page">
        <ul class="pagination">
          {%if posts.has_previous%}
          <li class="page-item"><a class="page-link" href = "?page=1">First</a></li>
          <li class="page-item"><a class="page-link" href= "?page={{posts.previous_page_number}}">{{posts.previous_page_number}}</a></li>
          {%endif%}
          <li class="page-item"><a class="page-link" href= "?page={{posts.number}}">{{posts.number}}</a></li>
          {%if posts.has_next%}
          <li class="page-item"><a class="page-link" href= "?page={{posts.next_page_number}}">{{posts.next_page_number}}</a></li>
          <li class="page-item"><a class="page-link"  href = "?page={{posts.paginator.num_pages}}">Last</a></li>
          {%endif%}
        </ul>
      </div>
</div>